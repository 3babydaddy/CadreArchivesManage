<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tfkj.business.specialReport.dao.SpecialReportDao">
  <resultMap id="BaseResultMap" type="com.tfkj.business.specialReport.entity.SpecialReport">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jan 16 11:32:45 GMT+08:00 2018.
    -->
    <id column="ID" jdbcType="VARCHAR" property="id" />
    <result column="NUMBER" jdbcType="VARCHAR" property="number" />
    <result column="REPORT_NAME" jdbcType="VARCHAR" property="reportName" />
    <result column="LSSUE_DATE" jdbcType="VARCHAR" property="lssueDate" />
    <result column="MSG" jdbcType="VARCHAR" property="msg" />
    <result column="CREATE_BY" jdbcType="VARCHAR" property="createBy.id" />
    <result column="CREATE_DATE" jdbcType="VARCHAR" property="createDate" />
    <result column="UPDATE_BY" jdbcType="VARCHAR" property="updateBy.id" />
    <result column="UPDATE_DATE" jdbcType="VARCHAR" property="updateDate" />
    <result column="DEL_FLAG" jdbcType="VARCHAR" property="delFlag" />
      <result column="FILE_UPLOAD_URL" jdbcType="VARCHAR" property="fileUploadUrl" />

  </resultMap>
  <sql id="Base_Column_List">
    ID, NUMBER,REPORT_NAME,REPORT_NAME,LSSUE_DATE,MSG,FILE_UPLOAD_URL, CREATE_BY, CREATE_DATE, UPDATE_BY,
    UPDATE_DATE, DEL_FLAG
  </sql>

    <select id="get" parameterType="java.lang.String" resultMap="BaseResultMap">

        select
       ID, NUMBER,REPORT_NAME,REPORT_NAME,LSSUE_DATE,MSG,FILE_UPLOAD_URL, CREATE_BY, CREATE_DATE, UPDATE_BY,
    UPDATE_DATE, DEL_FLAG
        from special_report 
        where ID = #{id,jdbcType=VARCHAR} and DEL_FLAG='0'

    </select>

  <select id="findList" parameterType="com.tfkj.business.specialReport.entity.SpecialReport" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from special_report
    where DEL_FLAG = '0'
      <if test="id !=null and id != ''">
      AND  ID = #{id}
  </if>
      <if test="number !=null and number != ''">
          AND  NUMBER LIKE CONCAT('%', #{number},'%')
      </if>
      <if test="reportName !=null and reportName != ''">
          AND  REPORT_NAME LIKE CONCAT('%', #{reportName},'%')
      </if>
      <if test="msg !=null and msg != ''">
          AND  MSG LIKE CONCAT('%', #{msg},'%')
      </if>
      <if test="lssueDate !=null and lssueDate != ''">
          AND  STR_TO_DATE(LSSUE_DATE,'%Y-%m-%d') &gt;= STR_TO_DATE(#{lssueDate},'%Y-%m-%d')
      </if>
  </select>

  <delete id="delete" parameterType="com.tfkj.business.specialReport.entity.SpecialReport">
    UPDATE special_report SET special_report.DEL_FLAG = '1'
    where
    <choose>
      <when test="id != null and id !=''">
        ID = #{id}
      </when>
      <otherwise>
        1=2
      </otherwise>
    </choose>

  </delete>
  <insert id="insert" parameterType="com.tfkj.business.specialReport.entity.SpecialReport">
    insert into special_report (
       ID, NUMBER,REPORT_NAME,LSSUE_DATE,MSG,FILE_UPLOAD_URL, CREATE_BY, CREATE_DATE, DEL_FLAG)
    values (#{id}, #{number}, #{reportName},#{lssueDate},
     #{msg}, #{fileUploadUrl},#{createBy.id}, #{createDate,jdbcType=TIMESTAMP},'0')
</insert>

  <update id="update" parameterType="com.tfkj.business.specialReport.entity.SpecialReport">
    update special_report
  　<trim prefix="set"  suffixOverrides=",">
      <if test="number != null">
        NUMBER = #{number},
      </if>
      <if test="reportName != null">
        REPORT_NAME = #{reportName},
      </if>
      <if test="msg != null">
        MSG = #{msg},
      </if>
      <if test="fileUploadUrl != null">
          FILE_UPLOAD_URL = #{fileUploadUrl},
      </if>
      <if test="lssueDate != null">
          LSSUE_DATE = #{lssueDate},
      </if>

      <if test="updateBy.id != null">
        UPDATE_BY = #{updateBy.id,jdbcType=VARCHAR},
      </if>
      <if test="updateDate != null">
        UPDATE_DATE = #{updateDate,jdbcType=TIMESTAMP},
      </if>
  </trim>
    where ID = #{id}
  </update>
    <update id="updateInspection" parameterType="com.tfkj.business.specialReport.entity.SpecialReport">
        update special_report
    　<trim prefix="set"  suffixOverrides=",">
        <if test="isTrack != null">
            IS_TRACK = #{isTrack},
        </if>
        <if test="trackTask != null">
            TRACK_TASK = #{trackTask},
        </if>
        <if test="trackSituation != null">
            TRACK_SITUATION = #{trackSituation},
        </if>
        <if test="status != null">
            STATUS = #{status},
        </if>
        <if test="isDayManager != null">
            IS_DAY_MANAGER = #{isDayManager},
        </if>

        <if test="salesNumberDate != null">
            SALES_NUMBER_DATE = #{salesNumberDate},
        </if>
        <if test="yearNumber != null">
            YEAR_NUMBER = #{yearNumber},
        </if>
        <if test="taskType != null">
            TASK_TYPE = #{taskType},
        </if>
        <if test="inspectionDate != null">
            INSPECTION_DATE = #{inspectionDate},
        </if>
        <if test="updateDate != null">
            UPDATE_DATE = getdate(),
        </if>
        <if test="remarks != null">
            REMARKS = #{remarks,jdbcType=VARCHAR},
        </if>
        <if test="delFlag != null">
            DEL_FLAG = #{delFlag,jdbcType=VARCHAR},
        </if>

        <if test="inspectionTask != null">
            INSPECTION_TASK = #{inspectionTask},
        </if>
        <if test="joinCompany != null">
            JOIN_COMPANY = #{joinCompany},
        </if>
        <if test="leadLeader != null">
            LEAD_LEADER = #{leadLeader},
        </if>
        <if test="inspectionRange != null">
            INSPECTION_RANGE = #{inspectionRange},
        </if>
        <if test="workSituation != null">
            WORK_SITUATION = #{workSituation},
        </if>

        <if test="inspectionProgramme != null">
            INSPECTION_PROGRAMME = #{inspectionProgramme},
        </if>
        <if test="inspectionNotice != null">
            INSPECTION_NOTICE = #{inspectionNotice},
        </if>
        <if test="inspectionSpecialReport != null">
            INSPECTION_SPECIAL_REPORT = #{inspectionSpecialReport},
        </if>
        <if test="inspectionInstructions != null">
            INSPECTION_INSTRUCTIONS = #{inspectionInstructions},
        </if>
        <if test="otherData != null">
            OTHER_DATA = #{otherData},
        </if>
        <if test="relationTask != null">
            RELATION_TASK = #{relationTask},
        </if>
        <if test="isRelation != null">
            IS_RELATION = #{isRelation},
        </if>
        <if test="luoshiDate != null">
            LUOSHI_DATE = #{luoshiDate},
        </if>
        <if test="xctbUploadUrl != null">
            XCTB_UPLOAD = #{xctbUploadUrl},
        </if>
        <if test="ldpsUploadUrl != null">
            LDPS_UPLOAD = #{ldpsUploadUrl},
        </if>
        <if test="scqdUploadUrl != null">
            SCQD_UPLOAD = #{scqdUploadUrl},
        </if>
        <if test="bgxsUploadUrl != null">
            BGXS_UPLOAD = #{bgxsUploadUrl},
        </if>
        <if test="bgxs != null">
            BGXS = #{bgxs},
        </if>
        <if test="inspectionEndDate != null">
            INSEPECTION_END_DATE = #{inspectionEndDate},
        </if>
        <if test="source != null">
            SOURCE = #{source},
        </if>
    </trim>
        where ID = #{id}
    </update>
</mapper>